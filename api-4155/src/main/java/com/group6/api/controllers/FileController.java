package com.group6.api.controllers;

import java.io.IOException;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.HttpStatus;
import org.springframework.http.MediaType;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.ControllerAdvice;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.multipart.MultipartFile;

import com.group6.api.services.FileService;

@RestController
@RequestMapping("/api/v1/files")
public class FileController {
	
	@Autowired
	private FileService fileService;
	
	
	@PostMapping("/uploadData/{parseFlag}")
	public ResponseEntity<String> uploadData(@RequestParam("file") MultipartFile file, @PathVariable String parseFlag) throws IOException, Exception {
		String response = null;			
		if (file == null) {
			response = "Please upload a valid file that contains data.";
			return new ResponseEntity<String>(response, HttpStatus.BAD_REQUEST);
		} else {
			response = fileService.processFile(file, parseFlag);
		}	
		return new ResponseEntity<String>(response, HttpStatus.OK);
	}

	@GetMapping (value="/getGeoJson", produces = "text/javascript")
	public String getGeoJson(@RequestParam("callback") String callbackStringFDS) {
		System.out.println(callbackStringFDS);
		String response = null;			

		return "/**/ typeof geo === 'function' && geo({\"type\":\"FeatureCollection\",\"features\":[{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Belg\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73624551296234,35.30498676370981],[-80.73508679866791,35.30498676370981],[-80.73508679866791,35.30581854777777],[-80.73624551296234,35.30581854777777],[-80.73624551296234,35.30498676370981]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Halt\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.7337886095047,35.30577476988214],[-80.73381006717682,35.305892970146004],[-80.73354184627533,35.30590610349798],[-80.73354184627533,35.30604619245326],[-80.73377251625061,35.30604619245326],[-80.7338798046112,35.30704869696014],[-80.73480784893036,35.3070574524033],[-80.73483467102051,35.306799166431865],[-80.7350492477417,35.30678603322487],[-80.73504388332367,35.30589734793024],[-80.73498487472534,35.305713480788434],[-80.7337886095047,35.30577476988214]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Wood\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73595583438873,35.30672036715779],[-80.73554277420044,35.30673350037547],[-80.73552668094635,35.30732449296437],[-80.73469519615173,35.30733324837767],[-80.73466837406157,35.30770097488093],[-80.73593437671661,35.307683464132964],[-80.73595583438873,35.30672036715779]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"CoEd\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73444843292236,35.30724131649068],[-80.73381006717682,35.30724131649068],[-80.73381006717682,35.3079286142596],[-80.73444843292236,35.3079286142596],[-80.73444843292236,35.30724131649068]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Heal\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73362231254578,35.30678603322487],[-80.7329249382019,35.30688672109085],[-80.73293030261993,35.307223805643204],[-80.73311805725096,35.30728509359275],[-80.73316633701324,35.30795050262764],[-80.73356330394745,35.30793736960753],[-80.73362231254578,35.30678603322487]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"StuU\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73444306850433,35.30817814130417],[-80.73293030261993,35.30817814130417],[-80.73293030261993,35.30910182243785],[-80.73444306850433,35.30910182243785],[-80.73444306850433,35.30817814130417]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Burs\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.7323509454727,35.30708809644686],[-80.73188960552214,35.30716251764725],[-80.73188960552214,35.30773161868076],[-80.73298931121826,35.3077710178349],[-80.73298931121826,35.3074339355626],[-80.7323509454727,35.30708809644686]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Came\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.731680393219,35.30740766935251],[-80.73076844215393,35.30740766935251],[-80.73076844215393,35.30792423658528],[-80.731680393219,35.30792423658528],[-80.731680393219,35.30740766935251]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"McMi\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.72999060153961,35.30747771256044],[-80.72953999042511,35.30747771256044],[-80.72953999042511,35.30803367837216],[-80.72999060153961,35.30803367837216],[-80.72999060153961,35.30747771256044]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Atki\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73293030261993,35.306203792237994],[-80.73293030261993,35.30564343605307],[-80.73281764984131,35.305569013455305],[-80.73276400566101,35.30545519052628],[-80.73125660419464,35.30541579024431],[-80.73128342628478,35.30590172571423],[-80.73178231716156,35.30590610349798],[-80.73180377483368,35.306190658934305],[-80.73293030261993,35.306203792237994]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Cone\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73286056518555,35.30558214685988],[-80.73352843523026,35.30560622476275],[-80.73356062173842,35.30511590969168],[-80.73355793952942,35.30461464701611],[-80.7329061627388,35.304621213796146],[-80.73289275169373,35.30487950672073],[-80.73316633701324,35.304892640237235],[-80.73316365480423,35.30512685425695],[-80.7328552007675,35.30513123208264],[-80.73286056518555,35.30558214685988]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Colv\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73213636875153,35.30443515482258],[-80.73128342628478,35.30443515482258],[-80.73128342628478,35.30537201213075],[-80.73213636875153,35.30537201213075],[-80.73213636875153,35.30443515482258]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Rowe\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.731143951416,35.30401925674634],[-80.73032855987549,35.30401925674634],[-80.73032855987549,35.30485105076098],[-80.731143951416,35.30485105076098],[-80.731143951416,35.30401925674634]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Smit\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73183864355087,35.3064577023565],[-80.73133170604706,35.30646864674024],[-80.73134511709212,35.30673350037547],[-80.73114663362503,35.30675320019798],[-80.7311627268791,35.30722818335544],[-80.731862783432,35.307210672505136],[-80.73183864355087,35.3064577023565]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Pros\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73118686676025,35.30644675797128],[-80.73072284460068,35.3064577023565],[-80.73071748018265,35.30674663359102],[-80.73059409856796,35.306847321506034],[-80.73059409856796,35.30694363156836],[-80.73073357343674,35.30700710859222],[-80.73074162006377,35.30718878393693],[-80.73112785816193,35.30718878393693],[-80.73112785816193,35.306991786556544],[-80.7310876250267,35.306996164281294],[-80.7310876250267,35.306757577935656],[-80.73115468025208,35.306683156362794],[-80.73118686676025,35.30644675797128]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Robi\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73029100894928,35.30420750561409],[-80.7302936911583,35.303868219547375],[-80.73032587766647,35.303861652706246],[-80.7303312420845,35.30335600433846],[-80.72955340147018,35.30333630368875],[-80.72956681251526,35.303515798320014],[-80.72964996099472,35.30352236518923],[-80.72965800762177,35.30369748150471],[-80.72966068983078,35.30422501711442],[-80.72984576225281,35.304209694551844],[-80.72994500398636,35.30426660691247],[-80.73004424571991,35.30426660691247],[-80.73014080524445,35.30418999410999],[-80.73029100894928,35.30420750561409]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Stor\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.72955876588821,35.30410900335419],[-80.72873264551163,35.30410900335419],[-80.72873264551163,35.30506337575784],[-80.72955876588821,35.30506337575784],[-80.72955876588821,35.30410900335419]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"SVDH\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73503047227858,35.30330346926191],[-80.73536843061447,35.303174320387015],[-80.73534965515137,35.30299044705692],[-80.73500365018845,35.30244101354517],[-80.73463082313538,35.302432257602426],[-80.73450744152068,35.30254170681857],[-80.7346522808075,35.30274965992138],[-80.73450744152068,35.30283940793748],[-80.73483467102051,35.30327501274786],[-80.73503047227858,35.30330346926191]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Gade\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73403805494308,35.30105975186344],[-80.7339334487915,35.300549707912545],[-80.73272109031677,35.3010312945603],[-80.73257625102997,35.301318056157285],[-80.73300540447235,35.30151068933122],[-80.73403805494308,35.30105975186344]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Kenn\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73118954896927,35.305805414411566],[-80.7307443022728,35.305805414411566],[-80.7307443022728,35.3061709589748],[-80.73118954896927,35.3061709589748],[-80.73118954896927,35.305805414411566]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"King\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73277741670609,35.3049057737516],[-80.73231607675552,35.3049057737516],[-80.73231607675552,35.30525818892458],[-80.73277741670609,35.30525818892458],[-80.73277741670609,35.3049057737516]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Rece\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73269158601761,35.30454897918662],[-80.7322570681572,35.30454897918662],[-80.7322570681572,35.30477006066692],[-80.73269158601761,35.30477006066692],[-80.73269158601761,35.30454897918662]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Laur\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73709577322006,35.302664289764884],[-80.73684900999069,35.30248041527577],[-80.73673367500305,35.30265991180571],[-80.73592633008957,35.30232499722696],[-80.73566347360611,35.30249792714987],[-80.73639839887619,35.30296636837562],[-80.73699116706848,35.3028612976824],[-80.73709577322006,35.302664289764884]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Levi\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.7333594560623,35.302364399014046],[-80.7330670952797,35.302233059649105],[-80.73267012834549,35.30274965992138],[-80.73240727186203,35.30324217829613],[-80.73278814554214,35.30325312311485],[-80.7333594560623,35.302364399014046]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Lync\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73431432247162,35.31075873112338],[-80.73428750038147,35.31008240129421],[-80.73318511247635,35.31008896763041],[-80.73319047689438,35.31067555818072],[-80.73343724012375,35.31066242560301],[-80.73343187570572,35.31032316660654],[-80.73402732610703,35.31032316660654],[-80.73403000831604,35.3107412210373],[-80.73431432247162,35.31075873112338]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"With\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.7332119345665,35.31079812880319],[-80.73245018720627,35.31078499624539],[-80.7320237159729,35.31029471256151],[-80.73177695274353,35.31041509499129],[-80.73210954666136,35.31089662291883],[-80.73182255029678,35.31143067781312],[-80.73201298713684,35.31152698241881],[-80.73210418224335,35.311467886424374],[-80.73239922523499,35.31106734576847],[-80.73320388793945,35.31103670323223],[-80.7332119345665,35.31079812880319]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Mart\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.72845101356506,35.309990472531375],[-80.72757661342621,35.309990472531375],[-80.72757661342621,35.310594573917555],[-80.72845101356506,35.310594573917555],[-80.72845101356506,35.309990472531375]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Memo\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73619186878204,35.30363400188412],[-80.73550790548325,35.30363400188412],[-80.73550790548325,35.30393388792939],[-80.73619186878204,35.30393388792939],[-80.73619186878204,35.30363400188412]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"PORT\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.74343383312225,35.311518227459395],[-80.74306637048721,35.311273088211045],[-80.74262648820877,35.31171740255165],[-80.74300467967987,35.31194284189953],[-80.74343383312225,35.311518227459395]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Grig\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.74252456426619,35.31107828952857],[-80.74229925870895,35.3109360205315],[-80.74200421571732,35.31120742578621],[-80.74188888072968,35.311141763308086],[-80.74219465255737,35.310833148946934],[-80.74199080467224,35.31071495590107],[-80.7414785027504,35.31121180328287],[-80.74200958013535,35.311581700893676],[-80.74252456426619,35.31107828952857]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Duke\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.7417842745781,35.31182027301163],[-80.74119687080383,35.311395657928074],[-80.74038684368134,35.31223831970497],[-80.74102252721786,35.31265855294683],[-80.74131220579147,35.312358699242175],[-80.74123173952103,35.31229741513652],[-80.7417842745781,35.31182027301163]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Bioi\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.74147313833237,35.31273734643663],[-80.74190497398376,35.31301750044533],[-80.74240118265152,35.312549117417014],[-80.74200153350829,35.31230617001162],[-80.74147313833237,35.31273734643663]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"EPIC\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.74206590652466,35.308558996888266],[-80.74163675308228,35.30831384867195],[-80.74100375175476,35.30898362686228],[-80.74194252490997,35.30959211335185],[-80.74260234832764,35.30897487162758],[-80.742307305336,35.30870783651432],[-80.74193179607391,35.30900989256065],[-80.74177622795105,35.30889607447271],[-80.74206590652466,35.308558996888266]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Foun\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73687851428986,35.29821397201168],[-80.73764562606812,35.29787247170437],[-80.73723256587982,35.297277031824336],[-80.73646545410156,35.29762729110787],[-80.73687851428986,35.29821397201168]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"HunH\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73665052652359,35.302117043032744],[-80.73664247989653,35.30130273304422],[-80.73583513498306,35.30132462320487],[-80.73583245277405,35.30153695745577],[-80.73640108108519,35.30154790250514],[-80.73640644550323,35.30212361001547],[-80.73665052652359,35.302117043032744]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"BelH\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.7356071472168,35.31083752646385],[-80.73559641838074,35.31067555818072],[-80.73576807975769,35.31024218199056],[-80.73458522558212,35.309935752980074],[-80.73455572128296,35.31073027723158],[-80.73500901460648,35.310767486165005],[-80.73503583669662,35.3105858188572],[-80.73477298021317,35.31054204354133],[-80.73478639125824,35.31023561566679],[-80.73541134595871,35.310391018519645],[-80.73528528213501,35.31082220515365],[-80.7356071472168,35.31083752646385]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Fret\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.729521214962,35.306510235385],[-80.72951048612595,35.30583605892939],[-80.72845101356506,35.30585575897044],[-80.72846978902817,35.306120614612084],[-80.729521214962,35.306510235385]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Faci\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73043048381805,35.312279905383534],[-80.72974920272827,35.31207416550187],[-80.72936296463013,35.312783309270195],[-80.73042511940002,35.31320791706921],[-80.73043048381805,35.312279905383534]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"RUP\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73022663593292,35.31329108740793],[-80.72990477085114,35.31375946613957],[-80.73079526424408,35.31418844614957],[-80.73106348514555,35.3136281452735],[-80.73022663593292,35.31329108740793]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"FOPS\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73231875896454,35.31375946613957],[-80.73230266571045,35.31489757138084],[-80.7344913482666,35.314875684892634],[-80.73449671268463,35.3137682208564],[-80.73231875896454,35.31375946613957]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"StuH\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73002278804779,35.31106296826399],[-80.73083281517029,35.31064710425966],[-80.73044657707214,35.31035818695589],[-80.72952389717102,35.3103187890618],[-80.72940051555634,35.31082220515365],[-80.73002278804779,35.31106296826399]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Harr\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73901891708373,35.30303422645914],[-80.7392281293869,35.302316241271676],[-80.73861122131348,35.30229872935823],[-80.73834300041199,35.30288099844777],[-80.73901891708373,35.30303422645914]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"BandCor2\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.72886407375336,35.30406084665016],[-80.72886139154434,35.30382006270001],[-80.72844564914703,35.30381568480338],[-80.72849661111832,35.30410462547319],[-80.72886407375336,35.30406084665016]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Barn\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73026150465012,35.305892970146004],[-80.73026955127716,35.30570034740518],[-80.72976529598236,35.30570034740518],[-80.72977870702744,35.305903914606134],[-80.73026150465012,35.305892970146004]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Macy\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.73055922985075,35.305892970146004],[-80.7305645942688,35.30544643490973],[-80.73030710220337,35.30545956833421],[-80.73030173778534,35.305917047956356],[-80.73055922985075,35.305892970146004]]]}},{\"type\":\"Feature\",\"properties\":{\"BUILDING\":\"Winn\"},\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-80.7302936911583,35.30532385617845],[-80.7305645942688,35.3053304229009],[-80.73057532310486,35.30488826239864],[-80.73030710220337,35.30488826239864],[-80.7302936911583,35.30532385617845]]]}}]});";
	}
	

}
